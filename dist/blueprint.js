!function e(t,n,r){function i(a,u){if(!n[a]){if(!t[a]){var o="function"==typeof require&&require;if(!u&&o)return o(a,!0);if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var s="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e){"use strict";var t=function(e){return e&&e.__esModule?e["default"]:e},n=function(e,t,n){t&&Object.defineProperties(e,t),n&&Object.defineProperties(e.prototype,n)},r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},i=t(e("./helpers/Dispatcher.js")),s=t(e("./helpers/Groups.js")),a=t(e("./helpers/Events.js")),u=t(e("./helpers/Layers.js")),o=t(e("./helpers/Registry.js")),l=t(e("./shapes/types/Rectangle.js")),c=function(){function e(t){var n=void 0===arguments[1]?{}:arguments[1];r(this,e),this.element=d3.select(t).attr("width","100%").attr("height","100%"),this.shapes=[],this.index=1,this.options=_.assign(this.defaultOptions(),n),this.dispatcher=new i,this.registry=new o,this.layers=new u,this.groups=new s(this.element),this.map={rect:l},this.registry.set("z-index-max",0),this.setupListeners()}return n(e,null,{add:{value:function(e){var t=this["new"](e),n=this.groups.shapes,r=n.append("g").attr(this.options.dataAttribute,t.label).append(t.getTag()),i={z:this.registry.incr("z-index-max")};return t.setOptions(this.options),t.setDispatcher(this.dispatcher),t.setElement(r),t.setAttributes(_.assign(i,t.getAttributes())),t.addElements(r),this.shapes.push({shape:t,"interface":t.getInterface()}),t.getInterface()},writable:!0,configurable:!0},remove:{value:function(e){var t=0,n=_.find(this.shapes,function(n,r){return n["interface"]===e?(t=r,e):void 0});return n.shape.element.remove(),this.shapes.splice(t,1),this.all()},writable:!0,configurable:!0},all:{value:function(){return this.shapes.map(function(e){return e["interface"]})},writable:!0,configurable:!0},clear:{value:function(){var e=this;_.forEach(this.shapes,function(t){return e.remove(t)})},writable:!0,configurable:!0},"new":{value:function(e){return new(this.map[e.toLowerCase()])(this.ident())},writable:!0,configurable:!0},ident:{value:function(){return["BP",this.index++].join("")},writable:!0,configurable:!0},register:{value:function(e,t){this.map[e]=t},writable:!0,configurable:!0},setupListeners:{value:function(){var e=this;this.dispatcher.listen(a.REORDER,function(){var t=e.element.selectAll("g["+e.options.dataAttribute+"]"),n=e.layers.reorder(t),r=n.min,i=n.max;e.registry.set("z-index-min",r),e.registry.set("z-index-max",i)}),this.dispatcher.listen(a.REMOVE,function(t){e.remove(t["interface"])})},writable:!0,configurable:!0},defaultOptions:{value:function(){return{dataAttribute:"data-id"}},writable:!0,configurable:!0}}),e}();!function(e){e.Blueprint=c}(window)},{"./helpers/Dispatcher.js":2,"./helpers/Events.js":3,"./helpers/Groups.js":4,"./helpers/Layers.js":6,"./helpers/Registry.js":7,"./shapes/types/Rectangle.js":10}],2:[function(e,t){"use strict";var n=function(e,t,n){t&&Object.defineProperties(e,t),n&&Object.defineProperties(e.prototype,n)},r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},i=function(){function e(){r(this,e),this.events=[]}return n(e,null,{send:{value:function(e){var t=void 0===arguments[1]?{}:arguments[1],n=void 0===arguments[2]?null:arguments[2];_.forEach(this.events[e],function(e){var r=e(t);_.isFunction(n)&&n(r)})},writable:!0,configurable:!0},listen:{value:function(e){var t=void 0===arguments[1]?function(){}:arguments[1];this.events[e]||(this.events[e]=[]),this.events[e].push(t)},writable:!0,configurable:!0}}),e}();t.exports=i},{}],3:[function(e,t){"use strict";t.exports={ATTRIBUTE:"attribute",ATTRIBUTE_GET_ALL:"attribute-get-all",ATTRIBUTE_SET:"attribute-set",REORDER:"reorder",REMOVE:"remove"}},{}],4:[function(e,t){"use strict";var n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},r=function i(e){n(this,i),this.shapes=e.append("g").classed("shapes",!0),this.handles=e.append("g").classed("handles",!0)};t.exports=r},{}],5:[function(e,t){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e},r=function(e,t,n){t&&Object.defineProperties(e,t),n&&Object.defineProperties(e.prototype,n)},i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},s=n(e("./../helpers/Events.js")),a=n(e("./../helpers/Utility.js")),u=function(){function e(){var t=void 0===arguments[0]?"":arguments[0];i(this,e),this.label=t}return r(e,null,{remove:{value:function(){this.dispatcher.send(s.REMOVE,{"interface":this})},writable:!0,configurable:!0},x:{value:function(e){return this.setAttr({x:e})},writable:!0,configurable:!0},y:{value:function(e){return this.setAttr({y:e})},writable:!0,configurable:!0},z:{value:function(e){return this.setAttr({z:e})},writable:!0,configurable:!0},width:{value:function(e){return this.setAttr({width:e})},writable:!0,configurable:!0},height:{value:function(e){return this.setAttr({height:e})},writable:!0,configurable:!0},setAttr:{value:function(){var e=void 0===arguments[0]?{}:arguments[0];return this.dispatcher.send(s.ATTRIBUTE_SET,{attributes:a.kebabifyKeys(e)}),this},writable:!0,configurable:!0},getAttr:{value:function(){var e={};return this.dispatcher.send(s.ATTRIBUTE_GET_ALL,{},function(t){e=t}),e},writable:!0,configurable:!0},setDispatcher:{value:function(e){this.dispatcher=e},writable:!0,configurable:!0},toString:{value:function(){return this.label?"[object Interface: "+this.label+"]":"[object Interface]"},writable:!0,configurable:!0}}),e}();t.exports=u},{"./../helpers/Events.js":3,"./../helpers/Utility.js":8}],6:[function(e,t){"use strict";var n=function(e,t,n){t&&Object.defineProperties(e,t),n&&Object.defineProperties(e.prototype,n)},r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},i=function(){function e(){r(this,e)}return n(e,null,{reorder:{value:function(e){var t=1,n=1;return e.sort(function(e,r){return e.z>n&&(n=e.z),r.z>n&&(n=r.z),e.z<t&&(t=e.z),r.z<t&&(t=r.z),e.z-r.z}),{min:t,max:n}},writable:!0,configurable:!0}}),e}();t.exports=i},{}],7:[function(e,t){"use strict";var n=function(e,t,n){t&&Object.defineProperties(e,t),n&&Object.defineProperties(e.prototype,n)},r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},i=function(){function e(){r(this,e),this.properties={}}return n(e,null,{set:{value:function(e,t){this.properties[e]=t},writable:!0,configurable:!0},incr:{value:function(e){return this.set(e,parseInt(this.get(e))+1),this.properties[e]},writable:!0,configurable:!0},decr:{value:function(e){return this.set(e,parseInt(this.get(e))-1),this.properties[e]},writable:!0,configurable:!0},get:{value:function(e){return this.properties[e]},writable:!0,configurable:!0}}),e}();t.exports=i},{}],8:[function(e,t){"use strict";var n=function(){return{throwException:function(e){throw"Blueprint.js: "+e+"."},transformAttributes:function(e){if(e.transform){var t=e.transform.match(/(\d+)\s*,\s*(\d+)/i),r=parseInt(t[1]),i=parseInt(t[2]);!_.isUndefined(e.x)&&_.isUndefined(e.y)&&(e=_.assign(e,n.pointsToTransform(e.x,i)),delete e.x),_.isUndefined(e.x)&&!_.isUndefined(e.y)&&(e=_.assign(e,n.pointsToTransform(r,e.y)),delete e.y)}return _.isUndefined(e.x)||_.isUndefined(e.y)||(e=_.assign(e,n.pointsToTransform(e.x,e.y)),delete e.x,delete e.y),e},retransformAttributes:function(e){if(e.transform){var t=e.transform.match(/(\d+)\s*,\s*(\d+)/i);e.x=parseInt(t[1]),e.y=parseInt(t[2]),delete e.transform}return n.camelifyKeys(e)},pointsToTransform:function(e,t){return{transform:"translate("+e+", "+t+")"}},kebabifyKeys:function(e){var t={};return _.forIn(e,function(e,n){t[_.kebabCase(n)]=e}),t},camelifyKeys:function(e){var t={};return _.forIn(e,function(e,n){t[_.camelCase(n)]=e}),t}}}();t.exports=n},{}],9:[function(e,t){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e},r=function(e,t,n){t&&Object.defineProperties(e,t),n&&Object.defineProperties(e.prototype,n)},i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},s=n(e("./../helpers/Interface.js")),a=n(e("./../helpers/Dispatcher.js")),u=n(e("./../helpers/Events.js")),o=n(e("./../helpers/Utility.js")),l=function(){function e(){var t=void 0===arguments[0]?"":arguments[0];i(this,e),this.element=null,this.label=t,this["interface"]=null}return r(e,null,{setElement:{value:function(e){this.element=e},writable:!0,configurable:!0},setDispatcher:{value:function(e){this.dispatcher=e},writable:!0,configurable:!0},setOptions:{value:function(e){this.options=e},writable:!0,configurable:!0},getInterface:{value:function(){var e=this;if(null===this["interface"]){this["interface"]=new s(this.label);var t=new a;this["interface"].setDispatcher(t);var n=function(){var t={z:d3.select(e.element.node().parentNode).datum().z},n=_.assign(e.element.datum(),t);return o.retransformAttributes(n)};t.listen(u.REMOVE,function(t){return e.dispatcher.send(u.REMOVE,t)}),t.listen(u.ATTRIBUTE_GET_ALL,n),t.listen(u.ATTRIBUTE_SET,function(t){e.setAttributes(t.attributes)}),_.isFunction(this.addMethods)&&(this["interface"]=_.assign(this["interface"],this.addMethods()))}return this["interface"]},writable:!0,configurable:!0},setAttributes:{value:function(){var e=void 0===arguments[0]?{}:arguments[0];if(e=_.assign(this.element.datum()||{},e),e=o.transformAttributes(e),!_.isUndefined(e.z)){var t=d3.select(this.element.node().parentNode);t.datum({z:e.z}),delete e.z,this.dispatcher.send(u.REORDER)}return this.element.datum(e),this.element.attr(this.element.datum()),this["interface"]},writable:!0,configurable:!0},getAttributes:{value:function(){var e={x:0,y:0};return _.isFunction(this.addAttributes)&&(e=_.assign(e,this.addAttributes())),e},writable:!0,configurable:!0},addElements:{value:function(e){return e},writable:!0,configurable:!0},getTag:{value:function(){o.throwException("Shape<"+this.label+"> must define a `getTag` method")},writable:!0,configurable:!0},dispatchAttributeEvent:{value:function(){var e=void 0===arguments[0]?{}:arguments[0];e.element=this,this.dispatcher.send(u.ATTRIBUTE,e)},writable:!0,configurable:!0},toString:{value:function(){var e=this.getTag().charAt(0).toUpperCase()+this.getTag().slice(1);return this.label?"[object "+e+": "+this.label+"]":"[object "+e+"]"},writable:!0,configurable:!0}}),e}();t.exports=l},{"./../helpers/Dispatcher.js":2,"./../helpers/Events.js":3,"./../helpers/Interface.js":5,"./../helpers/Utility.js":8}],10:[function(e,t){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e},r=function(e,t,n){t&&Object.defineProperties(e,t),n&&Object.defineProperties(e.prototype,n)},i=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},s=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a=n(e("./../Shape.js")),u=function(e){function t(){s(this,t),null!=e&&e.apply(this,arguments)}return i(t,e),r(t,null,{getTag:{value:function(){return"rect"},writable:!0,configurable:!0},addAttributes:{value:function(){return{fill:"red",width:100,height:100,x:100,y:20}},writable:!0,configurable:!0},addMethods:{value:function(){var e=this;return{fill:function(t){return e.setAttributes({fill:t})}}},writable:!0,configurable:!0}}),t}(a);t.exports=u},{"./../Shape.js":9}]},{},[1]);